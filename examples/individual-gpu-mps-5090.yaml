version: v1
flags:
  migStrategy: none
sharing:
  mps:
    renameByDefault: true
    failRequestsGreaterThanOne: true
individualGPU:
  enabled: true
  namePattern: gpu%d
  gpuConfigs:
    - index: 0
      name: gpu0
      mps:
        enabled: true
        replicas: 2
        activeThreadLimit: 4
        # pinnedMemoryLimit: 1024  # COMMENTED: This would artificially limit GPU memory to 1GB per replica
                                   # Remove this line to let MPS use available GPU memory fairly
    - index: 1
      name: gpu1
      mps:
        enabled: true
        replicas: 2
        activeThreadPercentage: 50
